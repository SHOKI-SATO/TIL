# トランザクション

## ▼トランザクションとは
>・一連の処理をひとまとめとしたもの<br>
<br>

![BEGIN TRANSACTION](https://user-images.githubusercontent.com/81621944/233751229-c493075e-4d27-44b3-8e8e-929f3394f566.jpg)<br>

### ●排他制御
>・処理中のデータをロックし、他の人の読み書きができないようにする<br>

>○共有ロック<br>
>>他のユーザは読み可能、書き不可能<br>

>○専有ロック<br>
>>他のユーザは、読み書き不可能<br>
<br>

>○デッドロック
>>複数のトランザクションがお互いに相手の使いたいデータをロックしてしまい、お互いがお互いのロック解除を永遠に待ち続けるという状態<br>
>>![deadlock1](https://user-images.githubusercontent.com/81621944/233751360-f4f8979f-2633-4b18-9433-2b43a63cafa0.png)<br>
>>![deadlock2](https://user-images.githubusercontent.com/81621944/233751363-4c786f05-a2af-4820-b440-eb97674996be.png)<br>
>>→こうなった場合は、いずれかのトランザクションを強制的にキャンセルする必要がある<br>
<br>

### ●ACID特性
>・トランザクション処理において必須となる４つの特性

>○Atomicity（原子性）<br>
>>トランザクション処理が完結しているか、全く処理されていないかのどちらかでなければならない<br>

>○Consistency（一貫性）<br>
>>トランザクションの状態に関わらず、データベースの内容に矛盾がない状態でなければならない<br>

>○Isolation（隔離性）<br>
>>複数のトランザクションを同時に実行した場合と、それぞれをひとつずつ実行した場合とで、同じ結果でなければならない<br>

>○Durability（耐久性）<br>
>>処理が終了したトランザクションは、その後にデータベースに障害が発生した場合でもデータの内容が損なわれてはならない<br>
